<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <!-- mata tag below make the page responsive on mobile devices-->
  <meta name="viewport" content="width=device-width, initial-scale=1 maximum-scale=1, user-scalable=no">
  <meta name="twitter:widgets:theme" content="dark">
  <!-- The above 2 meta tags *must* come first in the head; any other head content must come *after* these tags -->
  <title>Template</title>
  <!-- Bootstrap -->
  <script src="http://code.jquery.com/jquery-1.11.3.min.js"></script>
  <script src="http://cdnjs.cloudflare.com/ajax/libs/underscore.js/1.5.2/underscore-min.js"></script>
  <link href="https://fonts.googleapis.com/css?family=Open+Sans" rel="stylesheet">
  <link href="bootstrap-3.3.7/css/bootstrap.min.css" rel="stylesheet">  
  <link href="css/style.css" rel="stylesheet"> 
    <style>
    /* html, body {
      padding: 0;
      margin: 0;
      height: 100%;
    }
    body {
      background-color: #00080C;
      margin: 0;
    } */
  
    .bokeh {
      top: 0;
      position: fixed;
      z-index: -100;
    }
    /*Huge thanks to @tobiasahlin at http://tobiasahlin.com/spinkit/ */
    .spinner {
      margin: 100px auto 0;
      width: 300px;
      text-align: center;
    }

    .spinner > div {
      width: 18px;
      height: 18px;
      background-color: rgb(47, 190, 40);

      border-radius: 100%;
      display: inline-block;
      -webkit-animation: sk-bouncedelay 1.4s infinite ease-in-out both;
      animation: sk-bouncedelay 1.4s infinite ease-in-out both;
    }

    .spinner .bounce1 {
      -webkit-animation-delay: -0.26s;
      animation-delay: -0.26s;
    }

    .spinner .bounce2 {
      -webkit-animation-delay: -0.32s;
      animation-delay: -0.32s;
    }

    .spinner .bounce3 {
      -webkit-animation-delay: -0.48s;
      animation-delay: -0.48s;
    }
    .spinner .bounce4 {
      -webkit-animation-delay: -0.80s;
      animation-delay: -0.80s;
    }
    .spinner .bounce5 {
      -webkit-animation-delay: -0.96s;
      animation-delay: -0.96s;
    }
    .spinner .bounce6 {
      -webkit-animation-delay: -1.12s;
      animation-delay: -1.12s;
    }
    .spinner .bounce7 {
      -webkit-animation-delay: -1.38s;
      animation-delay: -1.38s;
    }
    .spinner .bounce8 {
      -webkit-animation-delay: -1.54s;
      animation-delay: -1.54s;
    }
    .spinner .bounce9 {
      -webkit-animation-delay: -1.90s;
      animation-delay: -1.90s;
    }
    .spinner .bounce10 {
      -webkit-animation-delay: -2.18s;
      animation-delay: -2.18s;
    }
    .spinner .bounce11 {
      -webkit-animation-delay: -2.38s;
      animation-delay: -2.38s;
    }
    .spinner .bounce12 {
      -webkit-animation-delay: -2.54s;
      animation-delay: -2.54s;
    }
    .spinner .bounce13 {
      -webkit-animation-delay: -2.70s;
      animation-delay: -2.70s;
    }

    @-webkit-keyframes sk-bouncedelay {
      0%, 80%, 100% { -webkit-transform: scale(0) }
      40% { -webkit-transform: scale(1.0) }
    }

    @keyframes sk-bouncedelay {
      0%, 80%, 100% { 
        -webkit-transform: scale(0);
        transform: scale(0);
      } 40% { 
        -webkit-transform: scale(1.0);
        transform: scale(1.0);
      }
    }
    </style> 
    
</head>
<body>  
  
  <header >
    <nav class="navbar navbar-inverse navbar-fixed-top" role="navigation" id="js-header">
      <div class="container-fluid">
        <!-- Brand and toggle get grouped for better mobile display -->
        <div class="nav navbar-header">
          <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a href="index.html"><img class="" src="images/logo.png" /></a>
        </div>

        <!-- Collect the nav links, forms, and other content for toggling -->
        <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">    
          <ul class="nav navbar-nav navbar-right">
            <li><a href="index.html"><span class="glyphicon glyphicon-home" aria-hidden="true"></span> Home</a></li>  
            <li class="dropdown">
              <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false"> <span class="glyphicon glyphicon-qrcode" aria-hidden="true"></span> Products <span class="caret"></span></a>
              <ul class="dropdown-menu">
                    <li><a href="mobile.html"><span class="glyphicon glyphicon-phone" aria-hidden="true"></span> Mobile</a></li>
                    <li><a href="bigdata.html"><span class="glyphicon glyphicon-tasks" aria-hidden="true"></span> Big Data</a></li>
                    <li><a href="iot.html"><span class="glyphicon glyphicon-globe" aria-hidden="true"></span> IoE/IoT</a></li>
              </ul>
            </li>
            <li class="dropdown">
              <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false"><span class="glyphicon glyphicon-user" aria-hidden="true"></span> About Us <span class="caret"></span></a>
              <ul class="dropdown-menu">
                <li><a href="management.html"><span class="glyphicon glyphicon-king" aria-hidden="true"></span> Management</a></li>
                <li><a href="codeofconduct.html"> <span class="glyphicon glyphicon-check" aria-hidden="true"></span> Code of Conduct</a></li>
                <li><a href="businessprocess.html"><span class="glyphicon glyphicon-thumbs-up" aria-hidden="true"></span> Business Process</a></li>
                <li><a href="locations.html"><span class="glyphicon glyphicon-certificate" aria-hidden="true"></span> Locations</a></li>
                <li><a href="contacts.html"><span class="glyphicon glyphicon-envelope" aria-hidden="true"></span> Contacts</a></li>                
              </ul>
            </li>
            <li><a href="blog.html"><span class="glyphicon glyphicon-pencil" aria-hidden="true"></span> Blog</a></li>                
          </ul>
        </div><!-- /.navbar-collapse -->
      </div><!-- /.container-fluid -->
    </nav>
  </header>
  
  <div class="panel panel-primary">
        <div class="panel-heading" align="center">
            <font size="6">Big Data</font>
        </div>
        <div class="panel-body">
            <div style = "text-align: center; margin-left: 10%; margin-right: 10%">
                <div style = "display: inline-block; text-align: left;">
                    <font size="4">
                        <b>According to IDC's prediction in 2013, the market for big data will reach $16.1</br> billion in 
                        2014, growing 6 times faster than the overal It market. This kind of </br>
                        business analysis reports brings great business opportunities and strong </br>
                        research interests among both academic and industry communities. Recently, </br>
                        our Big Data product offerings are organized focusing on Big Data Computing, </br>
                        Big Data Sciences and Analytics, and Big Data Technology and Engineering.</b>
                    </font>
                </div>
            </div>
        </div>
        
        <canvas id="myCanvas" class="bokeh"></canvas> 
        
      </div>
      
      <img src="images/streamData.png" width="170x" height="30px" style="margin:27px 80px">
      
      <img src="images/data.png" width="550x" height="230px" style="margin:-160px 350px">
      <img src="images/businessData.png" width="170x" height="30px" style="margin:-27px 1000px">
      <div class="spinner" style="margin:-5px 900px">
          <div class="bounce1"></div>
          <div class="bounce2"></div>
          <div class="bounce3"></div>
          <div class="bounce4"></div>
          <div class="bounce5"></div>
          <div class="bounce6"></div>
          <div class="bounce7"></div>
          <div class="bounce8"></div>
          <div class="bounce9"></div>
          <div class="bounce10"></div>
          <div class="bounce11"></div>
          <div class="bounce12"></div>
          <div class="bounce13"></div>
      </div>
      <div class="spinner" style="margin:3px 900px">
          <div class="bounce1"></div>
          <div class="bounce2"></div>
          <div class="bounce3"></div> 
          <div class="bounce4"></div>
          <div class="bounce5"></div>
          <div class="bounce6"></div>
          <div class="bounce7"></div>
          <div class="bounce8"></div>
          <div class="bounce9"></div>
          <div class="bounce10"></div>
          <div class="bounce11"></div>
          <div class="bounce12"></div>
          <div class="bounce13"></div>  
      </div>
      <div class="spinner" style="margin:5px 900px">
          <div class="bounce1"></div>
          <div class="bounce2"></div>
          <div class="bounce3"></div> 
          <div class="bounce4"></div>
          <div class="bounce5"></div>
          <div class="bounce6"></div> 
          <div class="bounce7"></div>
          <div class="bounce8"></div>
          <div class="bounce9"></div>
          <div class="bounce10"></div>
          <div class="bounce11"></div>
          <div class="bounce12"></div>
          <div class="bounce13"></div> 
      </div>
    </br></br>

  <footer class="container-fluid">
      
        <div class="row">
          <aside class="col-md-3">
            <img src="images/sjsu.png" alt="sjsu" class="img-responsive" />
          </aside>
          <div class="col-md-9">
            <a class="twitter-timeline" 
               href="https://twitter.com/technews_today"             
               data-height="100"
               data-width="500"
               data-chrome= "nofooter norborders transparent noscrollbar"
               data-link-color="#820bbb"
               data-border-color="#a80000">
               Tweets by technews_today</a> 
          </div>
        </div>
        <div class="row">
          <div class="col-md-12">
            <p id="copyright">Copyright © <script type="text/javascript">
              var d = new Date()
              document.write(d.getFullYear())
              </script> · CMPE 280 - Team Assignment · All Rights Reserved </p>
          </div>
        </div>        
      </footer>
        <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
        
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
        <script src="bootstrap-3.3.7/js/bootstrap.min.js"></script>
        <script src="js/myscript.js"></script>  
        <script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>
    </body>
    <script>
        $('#myModal1').on('shown.bs.modal', function () {
            $('#myInput').focus()
        });
        $('#myModal2').on('shown.bs.modal', function () {
            $('#myInput').focus()
        });
        $('#myModal3').on('shown.bs.modal', function () {
            $('#myInput').focus()
        });
    
    
        var canvas = document.querySelector('#myCanvas');
        // console.log(window.innerHeight);
        canvas.setAttribute('width', 350);
        canvas.setAttribute('height', 550);
    
        function rgb(red, green, blue) {
        return {r: red, g: green, b: blue };
        }
    
        function rgba (r, g, b, a) {
        return 'rgba('+r+','+g+','+b+','+a+')';
        }
    
        function variate (number, variance) {
        return Math.floor(number + variance - _.random(variance*2));
        }
    
        //farther should be blurrier
        //farther should be larger
        //farther should move slower
        var Bokeh = function (x, y, distance, options) {
        options = options || {};
        this.x = x;
        this.y = y;
        this.distance = 300;
        this.opacity = options.opacity;
        this.color = options.color;
        this.idiosyncracy = Math.random();
        this.yStep = this.idiosyncracy - .5;
    
        this.setAttributes();
        };
    
        _.extend(Bokeh.prototype, {
        draw: function (ctx) {
            var r = this.color.r, g = this.color.g, b = this.color.b;
            var radgrad = ctx.createRadialGradient(this.x, this.y, 0, this.x, this.y, this.radius);
            var baseOpacity = this.baseOpacity;
            baseOpacity = 0.9;
            console.log(this.distance);
            if (this.distance < 50) { // NOTE: magic number, cutoff threshold for being classified as a small dot
                radgrad.addColorStop(0, rgba(r, g, b, baseOpacity));
                radgrad.addColorStop(0.88, rgba(r, g, b, baseOpacity));
                radgrad.addColorStop(0.89, rgba(r, g, b, baseOpacity + 0.01));
                radgrad.addColorStop(0.95, rgba(r, g, b, baseOpacity + 0.02));
                radgrad.addColorStop(1, rgba(r, g, b, 0));
            } else {
                radgrad.addColorStop(0, rgba(r, g, b, baseOpacity + .05));
                radgrad.addColorStop(0.8, rgba(r, g, b, baseOpacity));
                radgrad.addColorStop(1, rgba(r, g, b, 0));
            }
            ctx.fillStyle = radgrad;
            ctx.fillRect(0, 0, canvas.width, canvas.height);
        },
        setAttributes: function () {
            var distance = this.distance;
            var maxDistance = 100;
            var maxRadius = 2;
            this.radius = distance/maxDistance * maxRadius;
            var coef = (maxDistance - distance)/maxDistance;
            if (distance < 50) {
                coef = (50 - distance)/50;
            } 
            this.speedCoefficient = coef * coef;
            this.baseOpacity = this.distance > 50 
                ? this.idiosyncracy < .2 ? .1 : .05
                : .16;
        }
        });
    
        var ctx = canvas.getContext('2d');
        ctx.globalCompositeOperation = 'lighter'
    
        var centerX = canvas.width / 2;
        var centerY = canvas.height / 2;
    
        var canvasManager = (function () {
        var ctx = canvas.getContext('2d');
        var stepActions = [];
    
        var fadeIn = function (alpha) {
            ctx.globalAlpha = 0;
            fadeTo(alpha);
        }
    
        var fadeTo = function (alpha) {
            var stepAction = function () {
                if ((ctx.globalAlpha - alpha) * (ctx.globalAlpha - alpha) < .00001) {
                    ctx.globalAlpha = alpha;
                    removeStepAction(stepAction);
                }
                ctx.globalAlpha = ctx.globalAlpha + (alpha - ctx.globalAlpha)/20;
            };
            addStepAction(stepAction);
        }
    
        var bindSize = function (element) {
            window.addEventListener('resize', _.debounce(function() {
                ctx.canvas.width = element.clientWidth;
                ctx.canvas.height = element.clientHeight;
    
                // TODO:
                // canvas manager shouldn't have to know about "dot"s or dotManager
                // have canvasManager fire event when canavas size has changed
                // have dotManager listen and call its own makeDots when that happens
                dotManager.makeDots();
            }, 100));
        };
    
        var clear = function () {
            // ctx.save();
            ctx.setTransform(1, 0, 0, 1, 0, 0);
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            // ctx.restore();
        }
    
        var step = function () {
            clear();
            stepActions.forEach(performAction);
            requestAnimationFrame(step);
        };
    
        var addStepAction = function (action) {
            stepActions.push(action);
        };
    
        var removeStepAction = function (action) {
            var index = stepActions.indexOf(action);
            if (index !== -1) {
                setTimeout(function () { //have to make this async else the screen jitters
                    stepActions.splice(index, 1);
                }, 0);
            }
        };
    
        var performAction = function (action) {
            action(ctx);
        };
    
        var withinBounds = function (point, wiggleRoom) {
            var left = 0 - wiggleRoom;
            var top = 0 - wiggleRoom;
            var right = canvas.offsetWidth + wiggleRoom;
            var bottom = canvas.offsetHeight + wiggleRoom;
            return (left <= point.x && point.x <= right) && (top <= point.y && point.y <= bottom);
        };
    
        return {
            clear: clear,
            step: step,
            addStepAction: addStepAction,
            fadeIn: fadeIn,
            fadeTo: fadeTo,
            bindSize: bindSize,
            withinBounds: withinBounds
        }
        } ());
    
    
        var dotManager = (function (canvas, canvasManager) {
        var dots = [];
    
        var transform = function (dot) {
            if (!canvasManager.withinBounds(dot, dot.radius)) {
                repurpose(dot);
            }
            dot.x += .3 * dot.speedCoefficient + .1;
            dot.y += dot.yStep * dot.speedCoefficient-.05;
        };
    
        // Resets properties on a dot
        // Currently only repositioning the dot
        // TODO:
        // 1. (when canvas has been shrunk) delete dot if dots.length > desired dot count
        // 2. give semi-random properties based on how many of a certain type are desired and how many currently exist
        var repurpose = function (dot) {
            // dot.color.r = 200;
    
            // If canvas is higher than it is wide, it would be more likely to reposition dots on the left edge
            // TODO: should maybe reposition based on where the dot went out of bounds
            if (Math.random() < canvas.offsetHeight / (canvas.offsetWidth + canvas.offsetHeight)) {
                // place to the left of canvas
                // TODO: might consider dots that drift leftwards
                dot.y = _.random(0, canvas.height);
                dot.x = 0 - dot.radius;
            } else {
                // places above or below canvas
                dot.x = _.random(0, canvas.width);
                if (dot.yStep < 0) { // drifts upwards
                    dot.y = canvas.offsetHeight + dot.radius;
                } else { // drifts downwards
                    dot.y = 0 - dot.radius;
                }
            }
        }
    
        var animate = function () {
            //TODO: use timestep instead of changing position on every frame, creating speeds depending on FPS
            canvasManager.addStepAction(function (ctx) {
                dots.forEach(function (dot) {
                    transform(dot);
                    dot.draw(ctx);
                });
            });
            canvasManager.step();
        };
    
        // TODO:
        // 1. currently does not remove dots when there are more dots than the canvasArea should have
        // 2. should perhaps prioritize creating dots where there are very few dots
        //    OR avoid creating dots where there are already very many dots
        // 3. should have new dots fade in instead of just pop in
        var makeDots = function () {
            // 1 small dot per every 15600 square-pixels
            // 1 large dot per every 20800 square-px
            var canvasArea = canvas.offsetWidth * canvas.offsetHeight;
            var desiredLargeDots = 50;//Math.ceil(canvasArea / 20800);
            var desiredSmallDots = 50;//Math.ceil(canvasArea / 15600);
            var largeDotsCount = 0;
            var smallDotsCount = 0;
    
            dots.forEach(function (dot) {
                dot.radius < 50 ? smallDotsCount++ : largeDotsCount++;
            });
    
            var largeDotsToCreate = Math.max.apply(Math, [desiredLargeDots - largeDotsCount, 0]);
            var smallDotsToCreate = Math.max.apply(Math, [desiredSmallDots - smallDotsCount, 0]);
    
            for (var i = 0; i < largeDotsToCreate; i++) {
                dotManager.dots.push(makeSingleDot(false));
            }
    
            for (var i = 0; i < smallDotsToCreate; i++) {
                dotManager.dots.push(makeSingleDot(true));
            }
    
            console.log('created ' + largeDotsToCreate + ' large dots');
            console.log('created ' + smallDotsToCreate + ' small dots');
        }
    
        var makeSingleDot = function (isSmallDot) {
            var x = _.random(0, canvas.width),
                y = _.random(0, canvas.height);
            var radius = isSmallDot ? variate(30, 10) : variate(80, 10);
            var color = rgb(variate(55, 30), variate(220, 20), variate(44, 40));
            return new Bokeh(x, y, radius, {
                opacity: .5,
                color: color
            });
        };
    
        return {
            dots: dots,
            animate: animate,
            makeDots: makeDots
        };
        }(canvas, canvasManager));
    
        dotManager.makeDots();
        canvasManager.fadeIn(1);
        canvasManager.bindSize(document.body);
        dotManager.animate();
    
    </script>
    </html>